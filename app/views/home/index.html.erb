<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<style>
body, h1,h2,h3,h4,h5,h6 {font-family: "Montserrat", sans-serif}
.w3-row-padding img {margin-bottom: 12px}
/* Set the width of the sidebar to 120px */
.w3-sidebar {width: 120px;background: #222;}
/* Add a left margin to the "page content" that matches the width of the sidebar (120px) */
#main {margin-left: 120px}
/* Remove margins from "page content" on small screens */
@media only screen and (max-width: 600px) {#main {margin-left: 0}}
</style>
<body class="w3-new">

<!-- Icon Bar (Sidebar - hidden on small screens) -->
<nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center" id="sidenav">
  <a href="#" class="w3-bar-item w3-button w3-padding-large w3-hover-purple">
    <p>INICIO</p>
  </a>
  <a href="/bills" class="w3-bar-item w3-button w3-padding-large w3-hover-purple">
    <p>REGISTROS</p>
  </a>
  <a href="/home" class="w3-bar-item w3-button w3-padding-large w3-hover-purple">
    <p>GRÁFICAS</p>
  </a>
  <a href="/home" class="w3-bar-item w3-button w3-padding-large w3-hover-purple">
    <p>AJUSTES</p>
  </a>
</nav>

<!-- Navbar on small screens (Hidden on medium and large screens) -->
<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
  <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
    <a href="#" class="w3-bar-item w3-button" style="width:25% !important">INICIO</a>
    <a href="/bills" class="w3-bar-item w3-button" style="width:25% !important">REGISTROS</a>
    <a href="/home" class="w3-bar-item w3-button" style="width:25% !important">GRÁFICAS</a>
    <a href="/home" class="w3-bar-item w3-button" style="width:25% !important">AJUSTES</a>
    <!-- <a href="#contact" class="w3-bar-item w3-button" style="width:25% !important">CONTACT</a> -->
  </div>
</div>

<!-- Page Content -->
<div class="w3-padding-large" id="main">

  <div class="main-container">
    <div class="container-leftsub col-md-8">

      <h3>Diseño Grafico</h3>
      <div class="design services btn-group">
        <button type="button" class="btn btn-outline-info service" value="20000" id="diseñoLogo">
          <i class="fa fa-pencil" aria-hidden="true"></i>
          <p class="description">Diseño logo</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="5000" id="identCorp">
          <i class="fa fa-industry" aria-hidden="true"></i>
          <p class="description">Identidad <br> Corporativa</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="2000" id="materialImp">
          <i class="fa fa-print" aria-hidden="true"></i>
          <p class="description">Material de <br> Impresion</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="2000" id="editorial">
          <i class="fa fa-id-card" aria-hidden="true"></i>
          <p class="description">Tarjetas de <br> Presentación</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="2000" id="editorial">
          <i class="fa fa-eraser" aria-hidden="true"></i>
          <p class="description">Editorial</p>
        </button>
      </div>
      <br>

      <h3>Web</h3>
      <div class="design services btn-group">
        <button type="button" class="btn btn-outline-info service" value="5000" id="diseñoWeb">
          <i class="fa fa-object-group" aria-hidden="true"></i>
          <p class="description">Diseño Web</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="10000" id="landingPage">
          <i class="fa fa-desktop" aria-hidden="true"></i>
          <p class="description">Landing <br> Page</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="2000" id="galleria">
          <i class="fa fa-image" aria-hidden="true"></i>
          <p class="description">Galleria de <br> Imagenes</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="15000" id="e-commerce">
          <i class="fa fa-credit-card" aria-hidden="true"></i>
          <p class="description">E-commerce</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="15000" id="tickets">
          <i class="fa fa-ticket" aria-hidden="true"></i>
          <p class="description">Tickets</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="2000" id="calendario">
          <i class="fa fa-calendar" aria-hidden="true"></i>
          <p class="description">Calendario</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="20000" id="baseDatos">
          <i class="fa fa-database" aria-hidden="true"></i>
          <p class="description">Base de <br> Datos</p>
        </button>
      </div>
      <br>

      <h3>Branding</h3>
      <div class="design services btn-group">
        <button type="button" class="btn btn-outline-info service" value="10000" id="auditoria">
          <i class="fa fa-user" aria-hidden="true"></i>
          <p class="description">Auditoría</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="10000" id="auditoria">
          <i class="fa fa-location-arrow" aria-hidden="true"></i>
          <p class="description">Dirección de <br> Marca</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="7000" id="arquitectura">
          <i class="fa fa-map-signs" aria-hidden="true"></i>
          <p class="description">Arquitectura de <br> Marca</p>
        </button>
        <button type="button" class="btn btn-outline-info service" value="5000" id="identidad">
          <i class="fa fa-id-badge" aria-hidden="true"></i>
          <p class="description">Identidad</p>
        </button>
      </div>
      <br>








      <h3>Social Media Management</h3>
      <div class="design services btn-group">
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="analisis" value="1000">
          <i class="fa fa-search" aria-hidden="true"></i>
          <p class="description">Análisis 4xhr </p>
        </button>
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="investigacion" value="1000">
          <i class="fa fa-flask" aria-hidden="true"></i>
          <p class="description">Investigación 4xhr </p>
        </button>
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="optimizacion" value="1000">
          <i class="fa fa-fast-forward" aria-hidden="true"></i>
          <p class="description">Optimización 4xhr </p>
        </button>
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="estrategia" value="3000">
          <i class="fa fa-clipboard" aria-hidden="true"></i>
          <p class="description">Estratégia 12xhr </p>
        </button>
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="communityAssistance" value="3000">
          <i class="fa fa-users" aria-hidden="true"></i>
          <p class="description">Community <br>Assistance 12xhr </p>
        </button>
        <button type="button" class="btn btn-outline-info btn-lg serviceNumeric" data-toggle="modal" data-target="#myModalNew" id="communityManager" value="6000">
          <i class="fa fa-user-plus" aria-hidden="true"></i>
          <p class="description">Community Manager <br>response 120xhr </p>
        </button>
      </div>
      <br>

      <h3>Marketing & Publicidad</h3>
      <div class="design services btn-group">
        <button type="button" class="btn btn-outline-info serviceVisual" value="1000" id="materialFoto" data-toggle="modal" data-target="#myModalSecond">
          <i class="fa fa-image" aria-hidden="true"></i>
          <p class="description">Levantamiento <br>fotográfico</p>
        </button>
        <button type="button" class="btn btn-outline-info serviceVisual" value="1000" id="concept" data-toggle="modal" data-target="#myModalSecond">
          <i class="fa fa-tv" aria-hidden="true"></i>
          <p class="description">Diseño de <br>Video</p>
        </button>
      </div>
    </div>


    <div class="container-rightsub col-md-4">
      <h3>Descripción</h3>
      <hr>
      <ol id="concepto">
      </ol>
      <hr>
      <p class="totalBill">TOTAL:  $<h3> <p id="total" value="0">0.000</p></h3></p>
      <p class="totalBill">TOTAL + IVA:  $<h1> <p id="iva" value=".16">0.000</p></h1></p>
      <!-- Trigger the modal with a button -->
      <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" id="cotizarModal">Cotizar</button>
      <!-- <%= link_to 'Email', email_path() %> -->
      <!-- <%= button_to "Email", email_path, :class => "button", :method => :post  %> -->
    </div>
  </div>


  <!-- Modals -->
  <div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h1>GRAMMA CS®</h1>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <%= render "bills/new", bill_form: @bill %>
        </div>
      </div>
    </div>
  </div>

  <div id="myModalNew" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content" id="range">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <h1>Unidades: <span id="demo"></span></h1>
          <div class="slidecontainer">
            <input type="range" min="0" max="15" value="0" class="slider" id="myRange">
            <!-- <p>hrs: <span id="demo"></span></p> -->
          </div>
          <br>
          <!-- <button class="btn btn-outline-info" id="accept">Acceptar</button> -->
          <button type="button" class="btn btn-outline-info" data-dismiss="modal" id="acceptModal">Aceptar</button>
          <br>
          <button type="button" class="btn btn-outline-light" data-dismiss="modal" id="closeModal">Remover</button>
        </div>
      </div>
    </div>
  </div>

  <div id="myModalSecond" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content" id="visualRange">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <h1>Piezas : <span id="visualDemo"></span></h1>
          <div class="slidecontainer">
            <input type="range" min="0" max="15" value="0" class="slider" id="myVisualRange">
            <!-- <p>hrs: <span id="demo"></span></p> -->
          </div>
          <br>
          <!-- <button class="btn btn-outline-info" id="accept">Acceptar</button> -->
          <button type="button" class="btn btn-outline-info" data-dismiss="modal" id="acceptModalVisual">Aceptar</button>
          <br>
          <button type="button" class="btn btn-outline-light" data-dismiss="modal" id="closeModalVisual">Remover</button>
        </div>
      </div>
    </div>
  </div>


  <script>
    var totalArray = [0]
    var total = 0;
    var totalValue = 0;
    var ivaTotalArray = 0
    var text = $('#total').text();
    var iva = $('#iva').attr("value");
    var ivaText = $('#iva').text();

    $('.service').on('click', function() {
      var nombre = $(this).attr('id')
      $(this).toggleClass('active');
      if ($(this).hasClass('active')) {
        totalArray.push($(this).val());
        total = eval(totalArray.join("+"));
        totalValue = total;
        ivaTotalArray = ((total*.16)+total);
        var texto = $(this).children('p').text();
        $( "#concepto" ).append( '<li>' + texto + '</li>' );
        $( "#concepto" ).children().last().attr('id', nombre );
      } else {
        totalArray.push('-' + $(this).val());
        total = eval(totalArray.join("+"));
        totalValue = (total + preTotal);
        $("#concepto").find('#' + nombre).remove();
        ivaTotalArray = ((totalValue*.16)+totalValue);
      }
      $('#total').text(text.replace(text, totalValue));
      $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
    });

    var test = "";
    var preTotal = 0;
    $('.serviceNumeric').on('click', function() {
      // console.log(total);
      // console.log(preTotal);
      var newTotal = 0;
      var nombre = $(this).attr('id')
      var value = $(this).val();
      var oldRange = 0;
      var slider = document.getElementById("myRange");
      var output = document.getElementById("demo");
      var texto = $(this).children('p').text();
      var cost = 0;
      test = $(this);
      test.addClass('active');
      slider.value = 0;
      output.innerHTML = slider.value;
      slider.oninput = function() {
        output.innerHTML = this.value;
        cost = ((Number(output.innerHTML)*value));
        newTotal = (Number(cost) + Number(total) + preTotal);
        if (output.innerHTML >= oldRange ) {
          ivaTotalArray = ((newTotal*.16) + newTotal);
          oldRange = output.innerHTML;
          $('#total').text(text.replace(text, newTotal));
          $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          $( "#concepto" ).append( '<li>' + texto + '</li>' );
          $( "#concepto" ).children().last().attr('id', nombre );
        } else {
          ivaTotalArray = (((total + cost)*.16)+(total + cost));
          oldRange = output.innerHTML;
          $( "#concepto" ).children().last().remove()
          $('#total').text(text.replace(text, (total + cost)));
          $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          if (output.innerHTML == 0) {
            $('#closeModal').click();
            $('#total').text(text.replace(text, (preTotal + total)));
            ivaTotalArray = (((preTotal + total)*.16)+(preTotal + total));
            $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          }
        }
      }
      $('#acceptModal').on('click', function() {
        preTotal += cost;
      });
    });


    $('.serviceVisual').on('click', function() {
      // console.log(preTotal);
      var newTotal = 0;
      var nombre = $(this).attr('id')
      var value = $(this).val();
      var oldRange = 0;
      var slider = document.getElementById("myVisualRange");
      var output = document.getElementById("visualDemo");
      var texto = $(this).children('p').text();
      var cost = 0;
      test = $(this);
      test = $(this);
      test.addClass('active');
      slider.value = 0;
      output.innerHTML = slider.value;
      slider.oninput = function() {
        output.innerHTML = this.value;
        cost = ((Number(output.innerHTML)*value));
        newTotal = (Number(cost) + Number(total) + preTotal);
        if (output.innerHTML >= oldRange ) {
          ivaTotalArray = ((newTotal*.16) + newTotal);
          oldRange = output.innerHTML;
          $('#total').text(text.replace(text, newTotal));
          $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          $( "#concepto" ).append( '<li>' + texto + '</li>' );
          $( "#concepto" ).children().last().attr('id', nombre );
        } else {
          ivaTotalArray = (((total + cost)*.16)+(total + cost));
          oldRange = output.innerHTML;
          $( "#concepto" ).children().last().remove()
          $('#total').text(text.replace(text, (total + cost)));
          $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          if (output.innerHTML == 0) {
            $('#closeModalVisual').click();
            $('#total').text(text.replace(text, (preTotal + total)));
            ivaTotalArray = (((preTotal + total)*.16)+(preTotal + total));
            $("#iva").text(ivaText.replace(ivaText, ivaTotalArray));
          }
        }
      }
      $('#acceptModalVisual').on('click', function() {
        // console.log("chuy");
        preTotal += cost;
      });
    });

    $('#closeModal').on('click', function(event) {
      test.removeClass('active');
    });
    $('#closeModalVisual').on('click', function(event) {
      test.removeClass('active');
    });
  </script>

</div>

</body>
</html>
